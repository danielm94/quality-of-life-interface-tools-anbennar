#Before opening the upgrade building macro window
custom_button = {
	name = delete_building_macro_tab_window_closed
	tooltip = delete_building_macro_closed_tt
	potential = {
		FROM = {
			NOT = {
				has_country_flag = upgrade_building_macro_open
			}
			NOT = {
				has_country_flag = build_building_macro_open
			}
			NOT = {
				has_country_flag = delete_building_macro_open
			}
		}
	}
	trigger = {
	}
	effect = {
		FROM = {
			set_country_flag = delete_building_macro_open
		}
	}
}

#After opening the upgrade building macro window
#We do this because the macro window obstructs the tab to open it.
custom_button = {
	name = delete_building_macro_tab_window_opened
	tooltip = delete_building_macro_open_tt
	potential = {
		FROM = {
			OR = {
				has_country_flag = upgrade_building_macro_open
				has_country_flag = delete_building_macro_open
				has_country_flag = build_building_macro_open
			}
		}
	}
	trigger = {
	}
	frame = {
		number = 1
		trigger = {
			NOT = {
				FROM = {
					has_country_flag = delete_building_macro_open
				}
			}
		}
	}
	frame = {
		number = 2
		trigger = {
			FROM = {
				has_country_flag = delete_building_macro_open
			}
		}
	}
	effect = {
		FROM = {
			if = {
				limit = {
					NOT = {
						has_country_flag = delete_building_macro_open
					}
				}
				set_country_flag = delete_building_macro_open
				clr_country_flag = upgrade_building_macro_open
				clr_country_flag = build_building_macro_open
			}
			else = {
				clr_country_flag = delete_building_macro_open
			}
		}
	}
}

custom_window = {
	name = delete_building_macro_window
	potential = {
		FROM = {
			has_country_flag = delete_building_macro_open
		}
	}
}

# Trade Buildings
custom_button = {
	name = building_macro_delete_marketplace
	tooltip = building_macro_delete_marketplace_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_building = marketplace
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_marketplace
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
	}
}

custom_button = {
	name = building_macro_delete_trade_depot
	tooltip = building_macro_delete_trade_depot_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_building = trade_depot
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_trade_depot
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
	}
}

custom_button = {
	name = building_macro_delete_stock_exchange
	tooltip = building_macro_delete_stock_exchange_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_building = stock_exchange
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_stock_exchange
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
	}
}

# Government Buildings
custom_button = {
	name = building_macro_delete_town_hall
	tooltip = building_macro_delete_town_hall_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_building = town_hall
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_town_hall
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
	}
}

custom_button = {
	name = building_macro_delete_courthouse
	tooltip = building_macro_delete_courthouse_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_building = courthouse
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_courthouse
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
	}
}

custom_button = {
	name = building_macro_delete_university
	tooltip = building_macro_delete_university_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_building = university
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_university
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
	}
}

# Navy Buildings
custom_button = {
	name = building_macro_delete_dock
	tooltip = building_macro_delete_dock_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_building = dock
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_dock
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
	}
}

custom_button = {
	name = building_macro_delete_drydock
	tooltip = building_macro_delete_drydock_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_building = drydock
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_drydock
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
	}
}

custom_button = {
	name = building_macro_delete_shipyard
	tooltip = building_macro_delete_shipyard_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_building = shipyard
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_shipyard
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
	}
}

custom_button = {
	name = building_macro_delete_grand_shipyard
	tooltip = building_macro_delete_grand_shipyard_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_building = grand_shipyard
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_grand_shipyard
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
	}
}

# Production Buildings
custom_button = {
	name = building_macro_delete_workshop
	tooltip = building_macro_delete_workshop_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_building = workshop
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_workshop
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
	}
}

custom_button = {
	name = building_macro_delete_counting_house
	tooltip = building_macro_delete_counting_house_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_building = counting_house
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_counting_house
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
	}
}

# Army Buildings
custom_button = {
	name = building_macro_delete_barracks
	tooltip = building_macro_delete_barracks_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_building = barracks
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_barracks
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
	}
}

custom_button = {
	name = building_macro_delete_training_fields
	tooltip = building_macro_delete_training_fields_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_building = training_fields
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_training_fields
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
	}
}

custom_button = {
	name = building_macro_delete_regimental_camp
	tooltip = building_macro_delete_regimental_camp_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_building = regimental_camp
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_regimental_camp
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
	}
}

custom_button = {
	name = building_macro_delete_conscription_center
	tooltip = building_macro_delete_conscription_center_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_building = conscription_center
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_conscription_center
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
	}
}

# Taxation Buildings
custom_button = {
	name = building_macro_delete_temple
	tooltip = building_macro_delete_temple_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_building = temple
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_temple
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
	}
}

custom_button = {
	name = building_macro_delete_cathedral
	tooltip = building_macro_delete_cathedral_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_building = cathedral
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_cathedral
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
	}
}

# Defense Buildings
custom_button = {
	name = building_macro_delete_fort_15th
	tooltip = building_macro_delete_fort_15th_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_building = fort_15th
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_fort_15th
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
	}
}

custom_button = {
	name = building_macro_delete_fort_16th
	tooltip = building_macro_delete_fort_16th_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_building = fort_16th
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_fort_16th
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
	}
}

custom_button = {
	name = building_macro_delete_fort_17th
	tooltip = building_macro_delete_fort_17th_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_building = fort_17th
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_fort_17th
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
	}
}

custom_button = {
	name = building_macro_delete_fort_18th
	tooltip = building_macro_delete_fort_18th_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_building = fort_18th
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_fort_18th
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
	}
}

# Coastal Defense Buildings
custom_button = {
	name = building_macro_delete_coastal_defence
	tooltip = building_macro_delete_coastal_defence_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_building = coastal_defence
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_coastal_defence
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
	}
}

custom_button = {
	name = building_macro_delete_naval_battery
	tooltip = building_macro_delete_naval_battery_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_building = naval_battery
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_naval_battery
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
	}
}

# Manufactories
custom_button = {
	name = building_macro_delete_manufactory
	tooltip = building_macro_delete_manufactory_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_production_manufactory = yes
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_manufactory
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
		custom_tooltip = delete_macro_manufactory_specify_tt
	}
}

custom_button = {
	name = building_macro_delete_ramparts
	tooltip = building_macro_delete_ramparts_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_building = ramparts
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_ramparts
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
	}
}

custom_button = {
	name = building_macro_delete_impressment_offices
	tooltip = building_macro_delete_impressment_offices_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_building = impressment_offices
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_impressment_offices
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
	}
}

custom_button = {
	name = building_macro_delete_state_house
	tooltip = building_macro_delete_state_house_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_building = state_house
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_state_house
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
	}
}

custom_button = {
	name = building_macro_delete_soldier_households
	tooltip = building_macro_delete_soldier_households_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_building = soldier_households
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_soldier_households
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
	}
}

custom_button = {
	name = building_macro_delete_furnace
	tooltip = building_macro_delete_furnace_tt
	potential = {
	}
	trigger = {
		is_province_not_whitelisted_delete_building_macro = yes
		FROM = {
			has_any_building_selected_for_deletion = no
			any_owned_province = {
				has_building = furnace
			}
		}
	}
	effect = {
		FROM = {
			hidden_effect = {
				set_country_flag = delete_building_macro_furnace
			}
			country_event = {
				id = delete_building_macro_events.1
			}
		}
	}
}

custom_button = {
	name = delete_building_macro_whitelist_button
	tooltip = delete_building_macro_whitelist_button_tt
	potential = {
		NOT = {
			has_province_flag = delete_building_macro_whitelisted_province
		}
	}
	trigger = {
	}
	effect = {
		set_province_flag = delete_building_macro_whitelisted_province
		hidden_effect = {
			FROM = {
				play_sound = lock_mapmode
			}
		}
	}
}

custom_button = {
	name = delete_building_macro_unwhitelist_button
	tooltip = delete_building_macro_unwhitelist_button_tt
	potential = {
		has_province_flag = delete_building_macro_whitelisted_province
	}
	trigger = {
	}
	effect = {
		clr_province_flag = delete_building_macro_whitelisted_province
		hidden_effect = {
			FROM = {
				play_sound = unlock_mapmode
			}
		}
	}
}
